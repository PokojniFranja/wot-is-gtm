<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="učimo GTM bez da negdje nešto sjebemo">
    <title>HOME - učimo GTM bez da nešto negdje sjebemo</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!--
        ============================================================================
        STEP 1: Set Default Consent State (BEFORE GTM loads)
        ============================================================================

        CRITICAL: This MUST come BEFORE the GTM script!

        Why? Because GTM needs to know the consent state from the moment it loads.
        By setting everything to 'denied' first, we ensure that no tracking cookies
        are set or personal data collected until the user explicitly consents.

        This is the "default denied" approach required by GDPR and recommended
        by Google for Consent Mode v2.

        What each consent type means:
        - ad_storage: Enables storage (like cookies) for advertising purposes
        - ad_user_data: Enables sending user data to Google for advertising
        - ad_personalization: Enables personalized advertising (e.g., remarketing)
        - analytics_storage: Enables storage for analytics (like cookies)
        - functionality_storage: Enables storage for site functionality
        - personalization_storage: Enables storage for personalization (e.g., video recommendations)
        - security_storage: Usually always granted for security features like fraud prevention

        wait_for_update: Tells GTM to wait up to 500ms for a consent update
        before making decisions. This gives our consent banner time to load.
    -->
    <script>
        // Initialize the dataLayer (GTM's communication channel)
        window.dataLayer = window.dataLayer || [];

        // Define gtag function - this is how we communicate consent to Google
        function gtag(){dataLayer.push(arguments);}

        // Set default consent to DENIED for all types
        // This is the privacy-first approach - no tracking without explicit consent
        gtag('consent', 'default', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied',
            'functionality_storage': 'denied',
            'personalization_storage': 'denied',
            'security_storage': 'granted', // Security features are usually always allowed
            'wait_for_update': 500 // Wait 500ms for consent banner to update consent
        });

        console.log('✅ Consent defaults set to DENIED - GTM will respect privacy until user consents');
    </script>

    <!--
        ============================================================================
        STEP 2: Google Tag Manager Container
        ============================================================================

        NOW we load GTM. Since we've already set the default consent state above,
        GTM knows to operate in "denied" mode until the user grants permission.

        Container ID: GTM-WNS3P8L9

        What this script does:
        1. Creates a dataLayer array (if not already created)
        2. Pushes the GTM start time to dataLayer
        3. Asynchronously loads the GTM library from Google's servers
        4. Inserts the GTM script into the page

        The 'async' flag means GTM loads without blocking the rest of your page.
    -->
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WNS3P8L9');</script>
    <!-- End Google Tag Manager -->
</head>

<body>
    <!--
        ============================================================================
        STEP 3: GTM Noscript Fallback
        ============================================================================

        This MUST be placed immediately after the opening <body> tag.

        Why? This is a fallback for users who have JavaScript disabled in their browser.
        Without JavaScript, the GTM script above won't run, so this <iframe> provides
        a basic way for GTM to still function (with limited capabilities).

        In practice, most tracking won't work without JavaScript, but this ensures
        GTM can at least register a basic page view.

        The iframe is hidden (display:none, visibility:hidden, 0px dimensions) so
        it doesn't affect your page layout.
    -->
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WNS3P8L9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Header & Navigation -->
    <header>
        <div class="header-container">
            <a href="index.html" class="logo">GTM Learning</a>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="privacy.html">Privacy</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="hero">
            <h1>Naša privatna GTM igraona - slobodno prčkaj</h1>
            <p>
                A hands-on project to learn Google Tag Manager from the ground up.
                Explore tags, triggers, variables, and tracking implementations.
            </p>
            <a href="about.html" class="btn">Learn More</a>
        </section>

        <!-- Introduction Section -->
        <div class="container">
            <section class="card">
                <h2>What is Google Tag Manager?</h2>
                <p>
                    Google Tag Manager (GTM) is a tag management system that allows you to
                    quickly and easily update tracking codes and related code snippets
                    (collectively known as "tags") on your website or mobile app.
                </p>
                <p>
                    Instead of editing your site's code every time you want to add a new
                    tracking tag, you can manage everything through GTM's web interface.
                </p>
            </section>

            <section class="card">
                <h2>What We'll Learn</h2>
                <ul>
                    <li>Setting up a GTM container and installing it on your website</li>
                    <li>Implementing Google Consent Mode v2 for privacy compliance</li>
                    <li>Creating tags to send data to Google Analytics 4 (GA4)</li>
                    <li>Using triggers to control when tags fire</li>
                    <li>Working with variables to capture dynamic data</li>
                    <li>Tracking user interactions like clicks, form submissions, and custom events</li>
                    <li>Debugging and testing your GTM implementation</li>
                </ul>
            </section>

            <section class="card">
                <h2>Explore the Demo Site</h2>
                <p>
                    This website has multiple pages designed to help you practice different
                    tracking scenarios:
                </p>
                <ul>
                    <li><strong>About:</strong> Simple page view tracking</li>
                    <li><strong>Products:</strong> E-commerce-like interactions and button clicks</li>
                    <li><strong>Contact:</strong> Form submission tracking</li>
                    <li><strong>Privacy:</strong> Understanding consent and privacy in tracking</li>
                </ul>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <ul class="footer-links">
                <li><a href="privacy.html">Privacy Policy</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="https://github.com/PokojniFranja/wot-is-gtm" target="_blank">GitHub</a></li>
            </ul>
            <p>&copy; 2026 GTM Learning Project. Built for educational purposes.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/dataLayer.js"></script>
    <script src="js/consent.js"></script>
    <script src="js/main.js"></script>
</body>

</html>