<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Privacy policy and consent information for GTM learning project">
    <title>Privacy Policy - GTM Prčkanje</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!--
        ============================================================================
        STEP 1: Set Default Consent State (BEFORE GTM loads)
        ============================================================================

        CRITICAL: This MUST come BEFORE the GTM script!

        Why? Because GTM needs to know the consent state from the moment it loads.
        By setting everything to 'denied' first, we ensure that no tracking cookies
        are set or personal data collected until the user explicitly consents.

        This is the "default denied" approach required by GDPR and recommended
        by Google for Consent Mode v2.

        What each consent type means:
        - ad_storage: Enables storage (like cookies) for advertising purposes
        - ad_user_data: Enables sending user data to Google for advertising
        - ad_personalization: Enables personalized advertising (e.g., remarketing)
        - analytics_storage: Enables storage for analytics (like cookies)
        - functionality_storage: Enables storage for site functionality
        - personalization_storage: Enables storage for personalization (e.g., video recommendations)
        - security_storage: Usually always granted for security features like fraud prevention

        wait_for_update: Tells GTM to wait up to 500ms for a consent update
        before making decisions. This gives our consent banner time to load.
    -->
    <script>
        // Initialize the dataLayer (GTM's communication channel)
        window.dataLayer = window.dataLayer || [];

        // Define gtag function - this is how we communicate consent to Google
        function gtag() { dataLayer.push(arguments); }

        // Set default consent to DENIED for all types
        // This is the privacy-first approach - no tracking without explicit consent
        gtag('consent', 'default', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied',
            'functionality_storage': 'denied',
            'personalization_storage': 'denied',
            'security_storage': 'granted', // Security features are usually always allowed
            'wait_for_update': 500 // Wait 500ms for consent banner to update consent
        });

        console.log('✅ Consent defaults set to DENIED - GTM will respect privacy until user consents');
    </script>

    <!--
        ============================================================================
        STEP 2: Google Tag Manager Container
        ============================================================================

        NOW we load GTM. Since we've already set the default consent state above,
        GTM knows to operate in "denied" mode until the user grants permission.

        Container ID: GTM-WNS3P8L9

        What this script does:
        1. Creates a dataLayer array (if not already created)
        2. Pushes the GTM start time to dataLayer
        3. Asynchronously loads the GTM library from Google's servers
        4. Inserts the GTM script into the page

        The 'async' flag means GTM loads without blocking the rest of your page.
    -->
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-WNS3P8L9');</script>
    <!-- End Google Tag Manager -->
</head>

<body>
    <!--
        ============================================================================
        STEP 3: GTM Noscript Fallback
        ============================================================================

        This MUST be placed immediately after the opening <body> tag.

        Why? This is a fallback for users who have JavaScript disabled in their browser.
        Without JavaScript, the GTM script above won't run, so this <iframe> provides
        a basic way for GTM to still function (with limited capabilities).

        In practice, most tracking won't work without JavaScript, but this ensures
        GTM can at least register a basic page view.

        The iframe is hidden (display:none, visibility:hidden, 0px dimensions) so
        it doesn't affect your page layout.
    -->
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WNS3P8L9" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Header & Navigation -->
    <header>
        <div class="header-container">
            <a href="index.html" class="logo">GTM Prčkanje</a>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="privacy.html">Privacy</a></li>
                    <!-- Basket link with SVG cart icon and item counter badge -->
                    <li>
                        <a href="basket.html" class="basket-link">
                            <svg class="cart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM7.16 14.26l.04-.12.94-1.7h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1 1 0 0020.04 4H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7.42c-.13 0-.22-.09-.22-.2l-.04-.04z"/>
                            </svg>
                            Basket
                            <span id="basket-count" class="basket-badge" style="display:none;">0</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <h1>Privacy Policy</h1>
            <p><em>Last updated: February 17, 2026</em></p>

            <section class="card">
                <h2>About This Demo Site</h2>
                <p>
                    This is a learning and demonstration project for Google Tag Manager.
                    No real user data is collected or stored. This privacy policy exists
                    to help you understand how privacy and consent work in the context of
                    web analytics and tracking.
                </p>
            </section>

            <section class="card">
                <h2>Understanding Web Tracking & Privacy</h2>
                <p>
                    When you visit most websites, they use tracking technologies (cookies,
                    pixels, tags) to collect information about how you interact with the site.
                    This data helps website owners understand user behavior and improve their sites.
                </p>
                <p>
                    However, privacy regulations like GDPR (Europe) and CCPA (California) require
                    websites to get user consent before setting certain types of tracking cookies.
                </p>
            </section>

            <section class="card">
                <h2>What is Google Consent Mode?</h2>
                <p>
                    Google Consent Mode v2 is a framework that allows Google tags (like Google
                    Analytics, Google Ads) to adjust their behavior based on user consent choices.
                </p>
                <p>Key concepts:</p>
                <ul>
                    <li>
                        <strong>Default Denied:</strong> Tags start in a "denied" state where they
                        don't set cookies or collect personal data until the user gives consent.
                    </li>
                    <li>
                        <strong>Consent Types:</strong> Different types of consent (analytics,
                        advertising, functionality, personalization) can be granted separately.
                    </li>
                    <li>
                        <strong>Cookieless Pings:</strong> Even without consent, Google can receive
                        anonymous aggregated data for basic measurement (no cookies, no personal data).
                    </li>
                    <li>
                        <strong>Consent Signals:</strong> Your consent choices are signaled to Google's
                        servers so they know how to handle your data.
                    </li>
                </ul>
            </section>

            <section class="card">
                <h2>How We'll Implement Consent Mode</h2>
                <p>
                    When we add GTM to this site, we'll implement Consent Mode properly:
                </p>
                <ol>
                    <li>
                        <strong>Set Default State:</strong> Before GTM loads, we'll set all consent
                        types to "denied" by default.
                    </li>
                    <li>
                        <strong>Show Consent Banner:</strong> Display a banner asking users to accept
                        or customize their cookie preferences.
                    </li>
                    <li>
                        <strong>Update Consent:</strong> When users make a choice, we'll update the
                        consent state and GTM will adjust tag behavior accordingly.
                    </li>
                    <li>
                        <strong>Store Preferences:</strong> Save the user's choice in localStorage
                        so they don't see the banner on every page load.
                    </li>
                    <li>
                        <strong>Respect Choices:</strong> Ensure all tags honor the consent settings.
                    </li>
                </ol>
            </section>

            <section class="card">
                <h2>Consent Mode Implementation Code</h2>
                <p>
                    Here's a preview of what the Consent Mode implementation looks like
                    (we'll build this in <code>consent.js</code>):
                </p>
                <pre style="background: #f5f5f5; padding: 1rem; border-radius: 4px; overflow-x: auto;"><code>// Set default consent state (denied) before GTM loads
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'ad_storage': 'denied',
  'ad_user_data': 'denied',
  'ad_personalization': 'denied',
  'analytics_storage': 'denied',
  'functionality_storage': 'denied',
  'personalization_storage': 'denied',
  'security_storage': 'granted', // Usually always granted
  'wait_for_update': 500 // Wait 500ms for user choice
});

// When user accepts, update consent
gtag('consent', 'update', {
  'ad_storage': 'granted',
  'analytics_storage': 'granted'
  // ... etc
});</code></pre>
            </section>

            <section class="card">
                <h2>Best Practices for Privacy-Compliant Tracking</h2>
                <ul>
                    <li>Always implement consent BEFORE loading tracking tags</li>
                    <li>Use "default denied" approach - better to ask permission than forgiveness</li>
                    <li>Never send PII (personally identifiable information) to analytics</li>
                    <li>Provide clear, honest information about what you track and why</li>
                    <li>Give users an easy way to change their consent preferences</li>
                    <li>Respect "Do Not Track" signals when possible</li>
                    <li>Keep only the data you actually need</li>
                    <li>Use Google's Consent Mode to ensure compliance across Google products</li>
                </ul>
            </section>

            <section class="card">
                <h2>Data We Will NOT Collect</h2>
                <p>This is a demo site, so we won't collect real data, but it's important to know
                    what you should NOT track in production:</p>
                <ul>
                    <li>Email addresses</li>
                    <li>Names</li>
                    <li>Phone numbers</li>
                    <li>Physical addresses</li>
                    <li>Social security numbers or government IDs</li>
                    <li>Financial information</li>
                    <li>Health information</li>
                    <li>Any other PII without explicit consent and proper security</li>
                </ul>
            </section>

            <div class="text-center mt-2">
                <a href="index.html" class="btn">Back to Home</a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <ul class="footer-links">
                <li><a href="privacy.html">Privacy Policy</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="https://github.com" target="_blank">GitHub</a></li>
            </ul>
            <p>&copy; 2026 GTM Learning Project. Built for educational purposes.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <!-- Load order is important:
         1. dataLayer.js - Initialize dataLayer array
         2. consent.js - Handle consent banner and user choices
         3. debug.js - Debug dashboard for learning
         4. main.js - General site functionality -->
    <script src="js/dataLayer.js"></script>
    <script src="js/consent.js"></script>
    <script src="js/debug.js"></script>
    <script src="js/basket.js"></script>
    <script src="js/main.js"></script>
</body>

</html>